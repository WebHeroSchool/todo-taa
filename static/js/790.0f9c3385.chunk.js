"use strict";(self.webpackChunktodo=self.webpackChunktodo||[]).push([[790,756],{2128:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var r=n(1413),o=n(364),i=n(707),l=n(5086),u=n(9497),s=n(885),c=n(5987),a="DndList_list__q+5qk",f=n(2791),d="TodoItem_item__FsVjq",m="TodoItem_draggable__7VAqp",p="TodoItem_touchActionsOff__RGtYo",g="TodoItem_itemValueWrapper__FBWF3",v="TodoItem_itemValue__mkxvo",E="TodoItem_wrongInputValue__t8L7N",h="TodoItem_unselectable__oqDok",b="TodoItem_done__jL6MD",y="TodoItem_deleteBtn__+ALDW",x="TodoItem_DragHandleIcon__9DDbP",I=function e(t,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4?arguments[4]:void 0;(n!==t||n===t&&i)&&(n.style.transform="translateY(".concat(r?r+16:r,"px)")),(o=r?n.nextElementSibling:n.previousElementSibling)&&e(t,o,r,i),l&&l(!1)},_=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.style.transition="transform ".concat(n,"s ease-out");var r=t.nextElementSibling;r&&e(r,n)},T=function(e,t){return e.style.transform.length<16?t.offsetHeight:0},S=function(e,t,n,r,o,i,l,u){r.current.style.cursor="auto",r.current.querySelectorAll("button").forEach((function(e){return e.style.pointerEvents=""})),r.current.querySelectorAll(".draggable").forEach((function(e){return e.style.pointerEvents=""})),e.style.width="",e.style.position="",e.style.pointerEvents="",e.style.backgroundColor="",I(e,e.parentElement.lastElementChild,0,!0),_(e.parentElement.firstElementChild,0),t(null),n(null),o&&o(i),document.body.classList.remove(h),l&&u(e.dataset.order,l.dataset.order)},Z=function(e,t,n,r){e&&"touch"!==r.pointerType&&t(setInterval((function(){r.clientY>r.target.offsetParent.offsetTop?n.current.parentElement.scrollTop+=30:n.current.parentElement.scrollTop-=30}),200))},C=function(e){clearInterval(e)},D=function(e,t,n,r,o){var i=e.target.closest("li");"mouse"===e.pointerType&&e.target.closest(".draggable")&&(t.current.querySelectorAll("button").forEach((function(e){return e.style.pointerEvents="none"})),t.current.querySelectorAll(".draggable").forEach((function(t){e.target.closest("div").contains(t)||(t.style.pointerEvents="none")})));var l=function(){e.target.closest(".draggable")&&t.current.contains(i)&&(t.current.style.cursor="move",i.parentElement.style.height="".concat(i.parentElement.offsetHeight,"px"),i.style.pointerEvents="none",i.style.width="".concat(i.offsetWidth,"px"),i.nextElementSibling&&I(n,i.nextElementSibling,i.offsetHeight),i.style.position="fixed",function(e,t){var n=t-e.offsetTop-.5*e.offsetHeight-document.scrollingElement.scrollTop;e.style.transform="translateY(".concat(n,"px)")}(i,e.nativeEvent.pageY),r(i))};"touch"!==e.pointerType||"draggable"!==e.target.parentElement.classList[0]||e.target.parentElement.previousElementSibling.previousElementSibling.isContentEditable?"touch"!==e.pointerType&&l():o(setTimeout((function(){i.style.backgroundColor="var(--dragging-element)",l()}),200))},j=function(e,t,n,r,o,i,l){if(e.current!==event.target&&t)return n(t,r,o,e,i,l)},k=function(e){"touch"===e.nativeEvent.pointerType&&e.preventDefault()},w=n(8243),L=n(6569),P=n(7698),q=n(4942),N=n(1694),V=n.n(N),W=n(3509),Y=n(9616),O=n(6513),A=n(5517),F=n(1855),H=n(184),R=function(e){var t,n,r=(0,f.useRef)(null),o=(0,f.useRef)(null),i=(0,f.useState)(e.value),l=(0,s.Z)(i,2),u=l[0],c=l[1];return(0,f.useEffect)((function(){r.current.focus()}),[e.isEditable]),(0,H.jsx)(W.ZP,{title:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e\u0435 \u0441\u043b\u043e\u0432\u043e",placement:"top",arrow:!0,open:e.isWrongValue,children:(0,H.jsxs)("li",{ref:o,className:V()((t={},(0,q.Z)(t,d,!0),(0,q.Z)(t,b,e.isDone),t)),"data-order":e.order,children:[(0,H.jsx)(Y.Z,{style:{alignSelf:"flex-start"},checked:e.isDone,name:"checked ".concat(e.value.toString()),onChange:e.onChangeCheckbox}),(0,H.jsx)("div",{className:g,children:(0,H.jsx)("span",{ref:r,className:V()((n={},(0,q.Z)(n,v,!0),(0,q.Z)(n,h,e.isSort),(0,q.Z)(n,E,e.isWrongValue),n)),contentEditable:e.isEditable,suppressContentEditableWarning:!0,onClick:e.onSingleDoubleClick((function(){return e.onChangeCheckbox()}),(function(){return e.onEditItem(e.id,u)})),onInput:function(){return c(r.current.textContent)},onBlur:function(){return e.onEditItem(e.id,u)},onKeyDown:function(t){"Enter"===t.code||"NumpadEnter"===t.code?(t.preventDefault(),e.onEditItem(e.id,u)):"Escape"===t.code&&(r.current.textContent=e.value,e.onEditItem(e.id,e.value))},children:e.value},e.id)}),(0,H.jsx)(O.Z,{className:y,onClick:e.onDeleteItem,title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0435\u043b\u043e",children:(0,H.jsx)(A.Z,{fontSize:"medium"})}),(0,H.jsx)("div",{className:V()("draggable",p,m),onPointerDown:function(){return document.body.classList.add(h)},children:(0,H.jsx)(F.Z,{className:x})})]})})},B=function(e,t){var n,r;return function(){n?n&&(Date.now()-n<200&&(clearTimeout(r),t()),n=null):(n=Date.now(),r=setTimeout((function(){e(),n=null}),200))}},M=n(1176),$=(0,o.$j)((function(e){return{isSort:e.todos.isSort}}),{toggleItem:w.u,deleteItem:L.w,editItem:P.Ob,setOrderItems:u.B4,setIsWrongValue:P.RM})((function(e){return(0,H.jsx)(R,(0,r.Z)((0,r.Z)({},e),{},{onChangeCheckbox:function(){return e.toggleItem(e.id)},onDeleteItem:function(){return e.deleteItem(e.id)},onEditItem:function(t,n){return(0,M.Z)(n)?e.editItem(t,n):e.setIsWrongValue(t)},onSingleDoubleClick:B}))})),X=["list","isDisabled"],z=function(e){var t=e.list,n=e.isDisabled,o=(0,c.Z)(e,X),i=(0,f.useState)(null),l=(0,s.Z)(i,2),u=l[0],d=l[1],m=(0,f.useState)(null),p=(0,s.Z)(m,2),g=p[0],v=p[1],E=(0,f.useState)(null),h=(0,s.Z)(E,2),b=h[0],y=h[1],x=(0,f.useState)(null),w=(0,s.Z)(x,2),L=w[0],P=w[1],q=(0,f.useState)(!0),N=(0,s.Z)(q,2),V=N[0],W=N[1],Y=(0,f.useRef)(null);return(0,f.useEffect)((function(){var e=j.bind(event,Y,u,S,d,v,C,L);return document.documentElement.addEventListener("pointerup",e),function(){document.documentElement.removeEventListener("pointerup",e)}}),[u,L]),(0,f.useEffect)((function(){var e=Y.current.parentElement,t=Z.bind(event,u,P,Y);return e.addEventListener("pointerleave",t),function(){return e.removeEventListener("pointerleave",t)}}),[u]),(0,f.useEffect)((function(){var e=Y.current.parentElement,t=C.bind(null,L);return e.addEventListener("pointerenter",t),function(){return e.removeEventListener("pointerenter",t)}}),[L]),(0,H.jsx)("ul",{ref:Y,className:a,onPointerDown:function(e){if(!n)return D(e,Y,u,d,y)},onPointerMove:function(e){return function(e,t){if(t){var n=e.pageY-t.offsetTop-.5*t.scrollHeight-document.scrollingElement.scrollTop;t.style.transform="translateY(".concat(n,"px)")}}(e,u)},onTouchMove:function(e){return function(e,t,n,r,o,i,l,u,s){"touchmove"===e.type&&clearTimeout(i);var c=document.elementFromPoint(e.touches[0].pageX,e.touches[0].pageY),a=function(){if(c)return c.closest("li")}();a||l(!0),t&&u&&n.current.contains(a)&&(I(t,a,T(a,t),null,l),s(t.dataset.order,a.dataset.order))}(e,u,Y,0,0,b,W,V,o.setOrderItems)},onPointerOver:function(e){return function(e,t,n,r,o){if(n){var i=document.elementFromPoint(e.clientX,e.clientY).closest("li");if(t.current.contains(i)){var l=T(i,n);I(n,i,l),_(i.parentElement.firstElementChild,0)}n&&i&&o(n.dataset.order,i.dataset.order)}}(e,Y,u,0,o.setOrderItems)},onPointerUp:function(){return function(e,t,n,r,o,i,l,u){if("touch"===event.pointerType&&clearTimeout(i),e)return n(e,r,o,l,null,null,t,u)}(u,g,S,d,v,b,Y,o.setOrderItems)},onContextMenu:k,children:t.map((function(e){return(0,H.jsx)($,(0,r.Z)({},e),e.id.toString())}))})},G=(0,o.$j)(null,{setOrderItems:u.B4})((function(e){return(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(z,(0,r.Z)({},e))})})),K=function(e){var t=function(e){return(0,l.Z)(i.default,"large",e)},n=e.items.filter((function(e){return e.filter}));return n.length>0?(0,H.jsx)(G,{list:n,isDisabled:e.isSort}):(0,H.jsx)(t,{errorType:"empty filter"})},U=(0,o.$j)((function(e){return{items:e.todos.items,isSort:e.todos.isSort}}))((function(e){return(0,H.jsx)(K,(0,r.Z)({items:e.items},e))}))},1176:function(e,t,n){n.d(t,{a:function(){return r}});var r=22,o=new RegExp(".{".concat(r,"}"));t.Z=function(e){for(var t=e.split(" "),n=0;n<t.length;n++)if(o.test(t[n]))return!1;return!0}}}]);
//# sourceMappingURL=790.0f9c3385.chunk.js.map