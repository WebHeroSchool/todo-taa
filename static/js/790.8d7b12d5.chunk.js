"use strict";(self.webpackChunktodo=self.webpackChunktodo||[]).push([[790,756],{2128:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var r=n(1413),o=n(364),i=n(707),l=n(5086),u=n(9497),s=n(885),a=n(5987),c="DndList_list__q+5qk",f=n(2791),d="TodoItem_item__FsVjq",m="TodoItem_draggable__7VAqp",p="TodoItem_touchActionsOff__RGtYo",g="TodoItem_itemValueWrapper__FBWF3",v="TodoItem_itemValue__mkxvo",E="TodoItem_wrongInputValue__t8L7N",h="TodoItem_unselectable__oqDok",b="TodoItem_done__jL6MD",y="TodoItem_deleteBtn__+ALDW",x="TodoItem_DragHandleIcon__9DDbP",I=function(e){return Array.prototype.indexOf.call(e.parentElement.children,e)},_=function e(t,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4?arguments[4]:void 0;(n!==t||n===t&&i)&&(n.style.transform="translateY(".concat(r?r+16:r,"px)")),(o=r?n.nextElementSibling:n.previousElementSibling)&&e(t,o,r,i),l&&l(!1)},S=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.style.transition="transform ".concat(n,"s ease-out");var r=t.nextElementSibling;r&&e(r,n)},T=function(e,t){return e.style.transform.length<16?t.offsetHeight:0},Z=function(e,t,n,r,o,i,l,u){r.current.style.cursor="auto",r.current.querySelectorAll("button").forEach((function(e){return e.style.pointerEvents=""})),r.current.querySelectorAll(".draggable").forEach((function(e){return e.style.pointerEvents=""})),e.style.width="",e.style.position="",e.style.pointerEvents="",e.style.backgroundColor="",_(e,e.parentElement.lastElementChild,0,!0),S(e.parentElement.firstElementChild,0),t(null),n(null),o&&o(i),document.body.classList.remove(h),l&&u(e.dataset.order,l.dataset.order)},j=function(e,t,n,r){e&&t(setInterval((function(){r.clientY>r.target.offsetParent.offsetTop?n.current.parentElement.scrollTop+=30:n.current.parentElement.scrollTop-=30}),200))},C=function(e){clearInterval(e)},D=function(e,t,n,r){e===t&&n.dataset.order>t.dataset.order?r(t.previousElementSibling):e===t&&n.dataset.order<t.dataset.order?r(t.nextElementSibling):r(t)},k=function(e,t,n,r,o){var i=e.target.closest("li");"mouse"===e.pointerType&&e.target.closest(".draggable")&&(t.current.querySelectorAll("button").forEach((function(e){return e.style.pointerEvents="none"})),t.current.querySelectorAll(".draggable").forEach((function(t){e.target.closest("div").contains(t)||(t.style.pointerEvents="none")})));var l=function(){e.target.closest(".draggable")&&t.current.contains(i)&&(t.current.style.cursor="move",i.parentElement.style.height="".concat(i.parentElement.offsetHeight,"px"),i.style.pointerEvents="none",i.style.width="".concat(i.offsetWidth,"px"),i.nextElementSibling&&_(n,i.nextElementSibling,i.offsetHeight),i.style.position="fixed",function(e,t){var n=t-e.offsetTop-.5*e.offsetHeight-document.scrollingElement.scrollTop;e.style.transform="translateY(".concat(n,"px)")}(i,e.nativeEvent.pageY),r(i))};"touch"!==e.pointerType||"draggable"!==e.target.parentElement.classList[0]||e.target.parentElement.previousElementSibling.previousElementSibling.isContentEditable?"touch"!==e.pointerType&&l():o(setTimeout((function(){i.style.backgroundColor="var(--dragging-element)",l()}),200))},w=function(e,t,n,r,o,i,l){if(e.current!==event.target&&t)return n(t,r,o,e,i,l)},L=function(e){"touch"===e.nativeEvent.pointerType&&e.preventDefault()},P=n(8243),q=n(6569),A=n(7698),N=n(4942),V=n(1694),W=n.n(V),Y=n(3509),O=n(9616),B=n(6513),F=n(5517),H=n(1855),R=n(184),M=function(e){var t,n,r=(0,f.useRef)(null),o=(0,f.useRef)(null),i=(0,f.useState)(e.value),l=(0,s.Z)(i,2),u=l[0],a=l[1];return(0,f.useEffect)((function(){r.current.focus()}),[e.isEditable]),(0,R.jsx)(Y.ZP,{title:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e\u0435 \u0441\u043b\u043e\u0432\u043e",placement:"top",arrow:!0,open:e.isWrongValue,children:(0,R.jsxs)("li",{ref:o,className:W()((t={},(0,N.Z)(t,d,!0),(0,N.Z)(t,b,e.isDone),t)),"data-order":e.order,children:[(0,R.jsx)(O.Z,{style:{alignSelf:"flex-start"},checked:e.isDone,name:"checked ".concat(e.value.toString()),onChange:e.onChangeCheckbox}),(0,R.jsx)("div",{className:g,children:(0,R.jsx)("span",{ref:r,className:W()((n={},(0,N.Z)(n,v,!0),(0,N.Z)(n,h,e.isSort),(0,N.Z)(n,E,e.isWrongValue),n)),contentEditable:e.isEditable,suppressContentEditableWarning:!0,onClick:e.onSingleDoubleClick((function(){return e.onChangeCheckbox()}),(function(){return e.onEditItem(e.id,u)})),onInput:function(){return a(r.current.textContent)},onBlur:function(){return e.onEditItem(e.id,u)},onKeyDown:function(t){"Enter"===t.code||"NumpadEnter"===t.code?(t.preventDefault(),e.onEditItem(e.id,u)):"Escape"===t.code&&(r.current.textContent=e.value,e.onEditItem(e.id,e.value))},children:e.value},e.id)}),(0,R.jsx)(B.Z,{className:y,onClick:e.onDeleteItem,title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0435\u043b\u043e",children:(0,R.jsx)(F.Z,{fontSize:"medium"})}),(0,R.jsx)("div",{className:W()("draggable",p,m),onPointerDown:function(){return document.body.classList.add(h)},children:(0,R.jsx)(H.Z,{className:x})})]})})},$=function(e,t){var n,r;return function(){n?n&&(Date.now()-n<200&&(clearTimeout(r),t()),n=null):(n=Date.now(),r=setTimeout((function(){e(),n=null}),200))}},X=n(1176),z=(0,o.$j)((function(e){return{isSort:e.todos.isSort}}),{toggleItem:P.u,deleteItem:q.w,editItem:A.Ob,setOrderItems:u.B4,setIsWrongValue:A.RM})((function(e){return(0,R.jsx)(M,(0,r.Z)((0,r.Z)({},e),{},{onChangeCheckbox:function(){return e.toggleItem(e.id)},onDeleteItem:function(){return e.deleteItem(e.id)},onEditItem:function(t,n){return(0,X.Z)(n)?e.editItem(t,n):e.setIsWrongValue(t)},onSingleDoubleClick:$}))})),G=["list","isDisabled"],K=function(e){var t=e.list,n=e.isDisabled,o=(0,a.Z)(e,G),i=(0,f.useState)(null),l=(0,s.Z)(i,2),u=l[0],d=l[1],m=(0,f.useState)(null),p=(0,s.Z)(m,2),g=p[0],v=p[1],E=(0,f.useState)(null),h=(0,s.Z)(E,2),b=h[0],y=h[1],x=(0,f.useState)(null),P=(0,s.Z)(x,2),q=P[0],A=P[1],N=(0,f.useState)(!0),V=(0,s.Z)(N,2),W=V[0],Y=V[1],O=(0,f.useRef)(null);return(0,f.useEffect)((function(){var e=w.bind(event,O,u,Z,d,v,C,q);return document.documentElement.addEventListener("pointerup",e),function(){document.documentElement.removeEventListener("pointerup",e)}}),[u,q]),(0,f.useEffect)((function(){var e=O.current.parentElement,t=j.bind(event,u,A,O);return e.addEventListener("pointerleave",t),function(){return e.removeEventListener("pointerleave",t)}}),[u]),(0,f.useEffect)((function(){var e=O.current.parentElement,t=C.bind(null,q);return e.addEventListener("pointerenter",t),function(){return e.removeEventListener("pointerenter",t)}}),[q]),(0,R.jsx)("ul",{ref:O,className:c,onPointerDown:function(e){if(!n)return k(e,O,u,d,y)},onPointerMove:function(e){return function(e,t){if(t){var n=e.pageY-t.offsetTop-.5*t.scrollHeight-document.scrollingElement.scrollTop;t.style.transform="translateY(".concat(n,"px)")}}(e,u)},onTouchMove:function(e){return function(e,t,n,r,o,i,l,u){"touchmove"===e.type&&clearTimeout(i);var s=document.elementFromPoint(e.touches[0].pageX,e.touches[0].pageY),a=function(){if(s)return s.closest("li")}();a||l(!0),t&&u&&n.current.contains(a)&&(D(r,a,t,o),_(t,a,T(a,t),null,l))}(e,u,O,g,v,b,Y,W)},onPointerOver:function(e){return function(e,t,n,r,o){if(n){var i=document.elementFromPoint(e.clientX,e.clientY).closest("li");if(t.current.contains(i)){var l=T(i,n);D(o,i,n,r),_(n,i,l),S(i.parentElement.firstElementChild,.1)}}}(e,O,u,v,g)},onPointerUp:function(){return function(e,t,n,r,o,i,l,u){if("touch"===event.pointerType&&clearTimeout(i),e&&t){var s,a=I(e)<I(t);s=a&&t.style.transform.length<16||!a&&t.style.transform.length<16?"afterEnd":"beforeBegin",t.insertAdjacentElement(s,e)}if(e)return n(e,r,o,l,null,null,t,u)}(u,g,Z,d,v,b,O,o.setOrderItems)},onContextMenu:L,children:t.map((function(e){return(0,R.jsx)(z,(0,r.Z)({},e),e.id.toString())}))})},U=(0,o.$j)(null,{setOrderItems:u.B4})((function(e){return(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(K,(0,r.Z)({},e))})})),J=function(e){var t=function(e){return(0,l.Z)(i.default,"large",e)},n=e.items.filter((function(e){return e.filter}));return n.length>0?(0,R.jsx)(U,{list:n,isDisabled:e.isSort}):(0,R.jsx)(t,{errorType:"empty filter"})},Q=(0,o.$j)((function(e){return{items:e.todos.items,isSort:e.todos.isSort}}))((function(e){return(0,R.jsx)(J,(0,r.Z)({items:e.items},e))}))},1176:function(e,t,n){n.d(t,{a:function(){return r}});var r=22,o=new RegExp(".{".concat(r,"}"));t.Z=function(e){for(var t=e.split(" "),n=0;n<t.length;n++)if(o.test(t[n]))return!1;return!0}}}]);
//# sourceMappingURL=790.8d7b12d5.chunk.js.map