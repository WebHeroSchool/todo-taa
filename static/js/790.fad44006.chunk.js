"use strict";(self.webpackChunktodo=self.webpackChunktodo||[]).push([[790,756],{2128:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var r=n(1413),o=n(364),i=n(707),l=n(5086),u=n(9497),s=n(885),c=n(5987),a="DndList_list__q+5qk",f=n(2791),d="TodoItem_item__FsVjq",m="TodoItem_draggable__7VAqp",p="TodoItem_touchActionsOff__RGtYo",g="TodoItem_itemValueWrapper__FBWF3",v="TodoItem_itemValue__mkxvo",E="TodoItem_wrongInputValue__t8L7N",h="TodoItem_unselectable__oqDok",b="TodoItem_done__jL6MD",y="TodoItem_deleteBtn__+ALDW",x="TodoItem_DragHandleIcon__9DDbP",I=function e(t,n,r){var o;n.style.transform="translateY(".concat(r?r+16:r,"px)"),(o=r?n.nextElementSibling:n.previousElementSibling)&&e(t,o,r)},_=function(e,t){return e.style.transform.length<16?t.offsetHeight:0},T=function(e,t,n,r,o){n.current.style.cursor="auto",n.current.querySelectorAll("button").forEach((function(e){return e.style.pointerEvents=""})),n.current.querySelectorAll(".draggable").forEach((function(e){return e.style.pointerEvents=""})),e.style.width="",e.style.position="",e.style.pointerEvents="",e.style.backgroundColor="",I(e,e.parentElement.lastElementChild,0),t(null),r&&r(o),document.body.classList.remove(h)},S=function(e,t,n,r){e&&"touch"!==r.pointerType&&t(setInterval((function(){r.clientY>r.target.offsetParent.offsetTop?n.current.parentElement.scrollTop+=30:n.current.parentElement.scrollTop-=30}),200))},D=function(e){clearInterval(e)},Z=function(e,t,n,r,o){var i=e.target.closest("li");"mouse"===e.pointerType&&e.target.closest(".draggable")&&(t.current.querySelectorAll("button").forEach((function(e){return e.style.pointerEvents="none"})),t.current.querySelectorAll(".draggable").forEach((function(t){e.target.closest("div").contains(t)||(t.style.pointerEvents="none")})));var l=function(){e.target.closest(".draggable")&&t.current.contains(i)&&(t.current.style.cursor="move",i.parentElement.style.height="".concat(i.parentElement.offsetHeight,"px"),i.style.pointerEvents="none",i.style.width="".concat(i.offsetWidth,"px"),i.nextElementSibling&&I(n,i.nextElementSibling,i.offsetHeight),i.style.position="fixed",function(e,t){var n=t-e.offsetTop-.5*e.offsetHeight-document.scrollingElement.scrollTop;e.style.transform="translateY(".concat(n,"px)")}(i,e.nativeEvent.pageY),r(i))};"touch"!==e.pointerType||"draggable"!==e.target.parentElement.classList[0]||e.target.parentElement.previousElementSibling.previousElementSibling.isContentEditable?"touch"!==e.pointerType&&l():o(setTimeout((function(){i.style.backgroundColor="var(--dragging-element)",l()}),200))},j=function(e){"touch"===e.nativeEvent.pointerType&&e.preventDefault()},C=n(8243),k=n(6569),w=n(7698),L=n(4942),P=n(1694),q=n.n(P),N=n(3509),V=n(9616),W=n(6513),Y=n(5517),O=n(1855),A=n(184),F=function(e){var t,n,r=(0,f.useRef)(null),o=(0,f.useRef)(null),i=(0,f.useState)(e.value),l=(0,s.Z)(i,2),u=l[0],c=l[1];return(0,f.useEffect)((function(){r.current.focus()}),[e.isEditable]),(0,A.jsx)(N.ZP,{title:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e\u0435 \u0441\u043b\u043e\u0432\u043e",placement:"top",arrow:!0,open:e.isWrongValue,children:(0,A.jsxs)("li",{ref:o,className:q()((t={},(0,L.Z)(t,d,!0),(0,L.Z)(t,b,e.isDone),t)),"data-order":e.order,children:[(0,A.jsx)(V.Z,{style:{alignSelf:"flex-start"},checked:e.isDone,name:"checked ".concat(e.value.toString()),onChange:e.onChangeCheckbox}),(0,A.jsx)("div",{className:g,children:(0,A.jsx)("span",{ref:r,className:q()((n={},(0,L.Z)(n,v,!0),(0,L.Z)(n,h,e.isSort),(0,L.Z)(n,E,e.isWrongValue),n)),contentEditable:e.isEditable,suppressContentEditableWarning:!0,onClick:e.onSingleDoubleClick((function(){return e.onChangeCheckbox()}),(function(){return e.onEditItem(e.id,u)})),onInput:function(){return c(r.current.textContent)},onBlur:function(){return e.onEditItem(e.id,u)},onKeyDown:function(t){"Enter"===t.code||"NumpadEnter"===t.code?(t.preventDefault(),e.onEditItem(e.id,u)):"Escape"===t.code&&(r.current.textContent=e.value,e.onEditItem(e.id,e.value))},children:e.value},e.id)}),(0,A.jsx)(W.Z,{className:y,onClick:e.onDeleteItem,title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0435\u043b\u043e",children:(0,A.jsx)(Y.Z,{fontSize:"medium"})}),(0,A.jsx)("div",{className:q()("draggable",p,m),onPointerDown:function(){return document.body.classList.add(h)},children:(0,A.jsx)(O.Z,{className:x})})]})})},H=function(e,t){var n,r;return function(){n?n&&(Date.now()-n<200&&(clearTimeout(r),t()),n=null):(n=Date.now(),r=setTimeout((function(){e(),n=null}),200))}},R=n(1176),B=(0,o.$j)((function(e){return{isSort:e.todos.isSort}}),{toggleItem:C.u,deleteItem:k.w,editItem:w.Ob,setOrderItems:u.B4,setIsWrongValue:w.RM})((function(e){return(0,A.jsx)(F,(0,r.Z)((0,r.Z)({},e),{},{onChangeCheckbox:function(){return e.toggleItem(e.id)},onDeleteItem:function(){return e.deleteItem(e.id)},onEditItem:function(t,n){return(0,R.Z)(n)?e.editItem(t,n):e.setIsWrongValue(t)},onSingleDoubleClick:H}))})),M=["list","isDisabled"],$=function(e){var t=e.list,n=e.isDisabled,o=(0,c.Z)(e,M),i=(0,f.useState)(null),l=(0,s.Z)(i,2),u=l[0],d=l[1],m=(0,f.useState)(null),p=(0,s.Z)(m,2),g=p[0],v=p[1],E=(0,f.useState)(null),h=(0,s.Z)(E,2),b=h[0],y=h[1],x=(0,f.useRef)(null);return(0,f.useEffect)((function(){var e=x.current.parentElement,t=S.bind(event,u,y,x);return e.addEventListener("pointerleave",t),function(){return e.removeEventListener("pointerleave",t)}}),[u]),(0,f.useEffect)((function(){var e=x.current.parentElement,t=D.bind(null,b);return e.addEventListener("pointerenter",t),function(){return e.removeEventListener("pointerenter",t)}}),[b]),(0,A.jsx)("ul",{ref:x,className:a,onPointerDown:function(e){if(!n)return Z(e,x,u,d,v)},onPointerMove:function(e){return function(e,t){if(t){var n=e.pageY-t.offsetTop-.5*t.scrollHeight-document.scrollingElement.scrollTop;t.style.transform="translateY(".concat(n,"px)")}}(e,u)},onTouchMove:function(e){return function(e,t,n,r,o){"touchmove"===e.type&&clearTimeout(r);var i=document.elementFromPoint(e.touches[0].pageX,e.touches[0].pageY-document.scrollingElement.scrollTop),l=function(){if(i)return i.closest("li")}();t&&n.current.contains(l)&&(I(t,l,_(l,t)),o(t.dataset.order,l.dataset.order))}(e,u,x,g,o.setOrderItems)},onPointerOver:function(e){return function(e,t,n,r){if(n){var o=document.elementFromPoint(e.clientX,e.clientY).closest("li");if(t.current.contains(o)){var i=_(o,n);I(n,o,i),r(n.dataset.order,o.dataset.order)}}}(e,x,u,o.setOrderItems)},onPointerUp:function(){return function(e,t,n,r,o){if("touch"===event.pointerType&&clearTimeout(r),e)return t(e,n,o)}(u,T,d,g,x,o.setOrderItems)},onContextMenu:j,children:t.map((function(e){return(0,A.jsx)(B,(0,r.Z)({},e),e.id.toString())}))})},X=(0,o.$j)(null,{setOrderItems:u.B4})((function(e){return(0,A.jsx)(A.Fragment,{children:(0,A.jsx)($,(0,r.Z)({},e))})})),z=function(e){var t=function(e){return(0,l.Z)(i.default,"large",e)},n=e.items.filter((function(e){return e.filter}));return n.length>0?(0,A.jsx)(X,{list:n,isDisabled:e.isSort}):(0,A.jsx)(t,{errorType:"empty filter"})},G=(0,o.$j)((function(e){return{items:e.todos.items,isSort:e.todos.isSort}}))((function(e){return(0,A.jsx)(z,(0,r.Z)({items:e.items},e))}))},1176:function(e,t,n){n.d(t,{a:function(){return r}});var r=22,o=new RegExp(".{".concat(r,"}"));t.Z=function(e){for(var t=e.split(" "),n=0;n<t.length;n++)if(o.test(t[n]))return!1;return!0}}}]);
//# sourceMappingURL=790.fad44006.chunk.js.map